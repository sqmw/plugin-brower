# plugin-browser
## plugin-block
### 简单介绍
- manifest 版本 3
- 现在的目的是为了实现通过关键字屏蔽哔哩哔哩里面的部分内容
- 后面需要能够类似其他的屏蔽软件一样能够选中屏蔽，这里增加一个功能，选中的是模板，之后可以根据模板以及当前的location.href来进行屏蔽
- 现在实现功能：能够添加关键字，屏蔽哔哩哔哩里面不想看到的任何内容
### 屏蔽实现
- 通过实验发现布局是flex的
- 通过递归找到众多需要筛查的父节点，遍历孩子节点，删除需要屏蔽的
  1. 第一次：通过递归找到父节点，保存父节点的class等信息
  2. 非第一次：通过上面保存的父节点的信息找到父节点，遍历删除

### 实现优化
- (增强、模板)关键字提取
  1. 点击关键字页面提取这个按钮后，当我们鼠标悬浮到某一个dom节点上面的时候，标红这个dom节点，用户可以自己选择节点，选中后能够，提取出这个节点里面显示的content，用可以选择content的部分内容作为屏蔽关键字
  2. 接着1步骤，选中该dom之后，由于页面元素的有规律性，我们可以提出出之前dom元素的结构层次，作为一个pattern
  3. 得到pattern之后，每次当浏览器刷新或者发起http请求的时候，我们就遍历已经加载了的页面，匹配pattern，删除需要屏蔽的

### 高级优化

- 拦截http请求，拦截不符合要求的，匹配规则如上面的 _实现优化_ 一样 

### 说明

- 因为是作为插件使用，对效率要求高，故未适用第三方js框架
- 为了有一个较好的UI，使用了第三方CSS渲染

## 总结

- 编写代码的过程是学习的过程
通过编写代码，实现了popup.js和background.js的通信，他们使用的都是浏览器提供的API
`chrome.storage.local.get` 或者 `chrome.storage.local.set 实现`，经过自己测试发现，该函数和localStorage不一样
- 为了安全考虑，绑定事件不能在`html`里面直接 `onclick = "XXX"` 的形式编写，需要在js里面获取需要绑定事件的dom，之后
`addEventListener()`
## 参考教程
https://developer.chrome.com/docs/extensions/

## 使用的第三方库
- bootstrap5：https://getbootstrap.com/